<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Node.js JSX framework for modular web scraping and data integration">
    <title>Documentation | webmiddle</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="../../assets/css/bootstrap.min.css">

    <!-- Prism CSS customized to match github style -->
    <link rel="stylesheet" href="../../assets/css/prism-custom.css">

    <!-- Custom styles for this template -->
    <link href="../../assets/css/theme.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    
<!-- Fixed navbar -->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">webmiddle</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <!-- you can exclude pages using {{#isnt}} helper: {{#isnt data.title 'Blog'}} -->
        
        <li>
          <a href="/">Home</a>
        </li>
        
        <li class="active">
          <a href="/docs">Documentation</a>
        </li>
        
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>


    <div class="container theme-showcase content" role="main">

      
<div class="content-header">
    <div class="container">
        <h1>Documentation</h1>
        <p>Learn how to use the framework effectively.</p>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-lg-3 sidebar">
            <!-- Sidebar -->
            <ul class="nav">      <li>        <a href="/docs/introduction.html">Introduction</a>              </li>          <li>        <a href="/docs/getting_started.html">Getting started</a>              </li>          <li>        <a href="/docs/overview.html">Overview</a>        <ul class="nav">      <li>        <a href="/docs/jsx_components.html">JSX components</a>              </li>          <li>        <a href="/docs/webmiddle_objects.html">webmiddle objects</a>              </li>          <li>        <a href="/docs/multiple_layers.html">Multiple layers</a>              </li>    </ul>      </li>          <li>        <a href="/docs/advanced/index.html">Advanced</a>        <ul class="nav">      <li>        <a href="/docs/advanced/context.html">context</a>              </li>          <li>        <a class="active" href="/docs/advanced/evaluate.html">evaluate</a>        <ul class="nav">      <li>        <a href="/docs/advanced/callvirtual.html">callVirtual</a>              </li>    </ul>      </li>    </ul>      </li>          <li>        <a href="/docs/packages.html">Packages</a>              </li>          <li>        <a href="/docs/example/index.html">Example: News Search</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/index.html">Site webmiddles</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/fox_news.html">Fox News</a>              </li>          <li>        <a href="/docs/example/site_webmiddles/the_new_york_times.html">The New York Times</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/project_webmiddle/index.html">Project webmiddle</a>        <ul class="nav">      <li>        <a href="/docs/example/project_webmiddle/site_handler.html">Site handler</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/meta.html">Meta</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/articledetails.html">ArticleDetails</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/searcharticles.html">SearchArticles</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/business_logic.html">Business logic</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/main.html">Main</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/sitemain.html">SiteMain</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/processpage.html">ProcessPage</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/filtering_and_merging.html">Filtering and merging</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/sample_execution.html">Sample execution</a>              </li>    </ul>      </li>    </ul>
        </div>

        <div class="col-lg-9">
            <!-- Content -->
            <div class="page-header">
                <h3 id="evaluate">evaluate</h3>
<p><img src="../../assets/img/documentation/webmiddle_evaluate.png" alt="evaluate" title="evaluate"></p>
<p>A different action is taken depending on the type of the value. After
the action, if the obtained value is different from the original value,
then the evaluate function is called recursively on such new value. If
no step applies to the value, then the evaluate function just returns
the value as is.</p>
<p>The recursive approach allows for greater composability, in fact the
function to evaluate might return a promise that returns a virtual and
so on.</p>
<p>Let’s see these actions.</p>
<p><br />
<strong>1)</strong> If value is a <strong>function</strong>, then that function is called by
spreading as arguments the <code>context.options.functionParameters</code> array, if such
option isn’t set, then the function is called without arguments.</p>
<p><hr />
<strong>Example:</strong></p>
<p>The Pipe component sets the <code>context.options.functionParameters</code> to an array containing the resources
object, this allows the user to specify the JSX children as functions
expecting the resources obtained up to that point.</p>
<hr />

<p><br />
<strong>2)</strong> If value is a <strong>promise</strong>, then the system just awaits the
resolving of such promise, so to obtain the resolved value.</p>
<p><br />
<strong>3) Virtual</strong></p>
<p>If value is a <strong>virtual</strong>, then the <code>callVirtual</code> function is used to call
the component associated to such virtual. The callVirtual will also create
a new options object based on the current options and on any options
specified by the virtual component (as static property).</p>
<p>The callVirtual will also retrieve the webmiddle instance to use in the
recursive call (i.e. down the call chain).</p>
<p>Thus, in the recursive call the evaluate function will use a new context
made of the new webmiddle and of the new options object.
That way they will be passed down the call chain.</p>
<p><hr />
<strong>Example:</strong></p>
<p>virtual:</p>
<pre><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponent</span> <span class="token punctuation">/></span></span></code></pre>
<p>Where MyComponent is defined as follows:</p>
<pre><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyOtherComponent</span> <span class="token punctuation">/></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

MyComponent<span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token punctuation">{</span>
  retries<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>In this case, evaluating <code>virtual</code> with a context having the <code>{ retries: 10 }</code> options,
will lead to <code>&lt;MyOtherComponent /&gt;</code> to be evaluated recursively with a <strong>new</strong> context having the <code>{ retries: 5 }</code> options.</p>
<hr />

<p>See the <a href="http://localhost:9000/docs/technical_documentation/callvirtual.html">callVirtual section</a> for details on how the new options and the
new webmiddle are calculated.</p>
<p>Once the recursive call completes, the eventual temporaneous webmiddle
correlation that was created will be destroyed by removing the
temporaneous parent.</p>
<p>Another step that is executed after the recursive call completed is the
<strong>resource override</strong>: if the result is a resource, then the resource
<code>name</code> and <code>contentType</code> are replaced with the <code>name</code> and <code>contentType</code>
attributes of the top virtual, if any.</p>
<p><hr />
<strong>Example:</strong></p>
<p>virtual:</p>
<pre><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponent</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>”myResourceName”</span> <span class="token punctuation">/></span></span></code></pre>
<p>Let’s suppose that MyComponent eventually returns the following resource:</p>
<pre><code class="language-javascript"><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'other'</span><span class="token punctuation">,</span>
  contentType<span class="token punctuation">:</span> <span class="token string">'text/plain'</span><span class="token punctuation">,</span>
  content<span class="token punctuation">:</span> <span class="token string">'some content here'</span>
<span class="token punctuation">}</span></code></pre>
<p>Then such resource will be transformed to:</p>
<pre><code class="language-javascript"><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'myResourceName'</span><span class="token punctuation">,</span>
  contentType<span class="token punctuation">:</span> <span class="token string">'text/plain'</span><span class="token punctuation">,</span>
  content<span class="token punctuation">:</span> <span class="token string">'some content here'</span>
<span class="token punctuation">}</span></code></pre>
<p>The resource override is a must when composing components, as it makes
sure that resources will have expected names, since they will be often
referenced by their names, such as in the Pipe and Parallel components.</p>
<p><br />
<strong>4)</strong> If value isn’t a <strong>resource</strong>, then the system checks if the
<code>context.options.expectResource</code> is true, in such a case, an exception will be
thrown.</p>
<p><br />
<strong>5)</strong> As <strong>default</strong>, the value is returned as is.</p>

            </div>
            <div class="page-nav">
                
                <span class="previous">Previous: <a href="/docs/advanced/context.html">context</a></span>
                
                
                <span class="next">Next: <a href="/docs/advanced/callvirtual.html">callVirtual</a></span>
                
            </div>
        </div>
    </div>
</div>

    </div>

    <footer class="footer text-center text-muted">
  <p>
    <span><a href="https://github.com/webmiddle/webmiddle">webmiddle</a></span>
     · 
    <span>MIT © <a href="https://github.com/Maluen">Manuel Dell&#x27;Elce</a></span>
  </p>
  <p>
    Found an issue with the docs? Report it <a href="https://github.com/webmiddle/webmiddle.github.io/issues">here</a>.
  </p>
</footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../../assets/js/bootstrap.min.js"></script>
  </body>
</html>
