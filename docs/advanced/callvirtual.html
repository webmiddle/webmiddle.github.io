<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Node.js JSX framework for modular web scraping and data integration">
    <title>Documentation | webmiddle</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="../../assets/css/bootstrap.min.css">

    <!-- Prism CSS customized to match github style -->
    <link rel="stylesheet" href="../../assets/css/prism-custom.css">

    <!-- Custom styles for this template -->
    <link href="../../assets/css/theme.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    
<!-- Fixed navbar -->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">webmiddle</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <!-- you can exclude pages using {{#isnt}} helper: {{#isnt data.title 'Blog'}} -->
        
        <li>
          <a href="/">Home</a>
        </li>
        
        <li class="active">
          <a href="/docs">Documentation</a>
        </li>
        
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>


    <div class="container theme-showcase content" role="main">

      
<div class="content-header">
    <div class="container">
        <h1>Documentation</h1>
        <p>Learn how to use the framework effectively.</p>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-lg-3 sidebar">
            <!-- Sidebar -->
            <ul class="nav">      <li>        <a href="/docs/introduction.html">Introduction</a>              </li>          <li>        <a href="/docs/getting_started.html">Getting started</a>              </li>          <li>        <a href="/docs/overview.html">Overview</a>        <ul class="nav">      <li>        <a href="/docs/jsx_components.html">JSX components</a>              </li>          <li>        <a href="/docs/webmiddle_objects.html">webmiddle objects</a>              </li>          <li>        <a href="/docs/multiple_layers.html">Multiple layers</a>              </li>    </ul>      </li>          <li>        <a href="/docs/advanced/index.html">Advanced</a>        <ul class="nav">      <li>        <a href="/docs/advanced/context.html">context</a>              </li>          <li>        <a href="/docs/advanced/evaluate.html">evaluate</a>        <ul class="nav">      <li>        <a class="active" href="/docs/advanced/callvirtual.html">callVirtual</a>              </li>    </ul>      </li>    </ul>      </li>          <li>        <a href="/docs/packages.html">Packages</a>              </li>          <li>        <a href="/docs/example/index.html">Example: News Search</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/index.html">Site webmiddles</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/fox_news.html">Fox News</a>              </li>          <li>        <a href="/docs/example/site_webmiddles/the_new_york_times.html">The New York Times</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/project_webmiddle/index.html">Project webmiddle</a>        <ul class="nav">      <li>        <a href="/docs/example/project_webmiddle/site_handler.html">Site handler</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/meta.html">Meta</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/articledetails.html">ArticleDetails</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/searcharticles.html">SearchArticles</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/business_logic.html">Business logic</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/main.html">Main</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/sitemain.html">SiteMain</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/processpage.html">ProcessPage</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/filtering_and_merging.html">Filtering and merging</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/sample_execution.html">Sample execution</a>              </li>    </ul>      </li>    </ul>
        </div>

        <div class="col-lg-9">
            <!-- Content -->
            <div class="page-header">
                <p><strong>callVirtual</strong></p>
<p><img src="../../assets/img/documentation/webmiddle_callVirtual.png" alt="callVirtual" title="callVirtual"></p>
<p>As previously said, a virtual has a type, attributes and children.</p>
<p>The <strong>type</strong> can be both a string or a function. If it is a
<strong>function</strong>, then we call such function “a component”. In terms of JSX, a
type is treated as a string when it begins with a lowercase letter,
example: <code>&lt;article /&gt;</code>.</p>
<p>If the type is a <strong>string</strong>, then there isn’t much to evaluate,
everything is returned as is: the result will be the virtual itself, and
there will be no change to both options and webmiddle.</p>
<p><br />
<strong>1) Options calculation</strong></p>
<p>The options to use are calculated by <strong>merging</strong> the following options:</p>
<ul>
<li><p>Current evaluate options.</p>
</li>
<li><p>Component options specified as static <code>options</code> property.</p>
</li>
</ul>
<p>The merge is <strong>in order</strong>, meaning that the component options
override the current evaluate options.</p>
<p>Any of these options can be specified either directly as an object or as
a <strong>function</strong> returning an object. The options function is called with
the same <strong>properties</strong> that are passed to a normal component, namely:</p>
<ul>
<li><p>Any virtual attributes.</p>
</li>
<li><p>The virtual children.</p>
</li>
</ul>
<p>Moreover, we also pass the context calculated up to that point:</p>
<ul>
<li><p>The webmiddle instance (as previously calculated).</p>
</li>
<li><p>The current evaluate options.</p>
</li>
</ul>
<p><br />
<strong>4) Props validation via propTypes</strong></p>
<p>Components can specify the properties they are expecting by means of the
propTypes static property and the <a href="https://www.npmjs.com/package/proptypes">PropTypes library</a>.</p>
<p><hr />
<strong>Example:</strong></p>
<pre><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> url <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* … */</span>
<span class="token punctuation">}</span>

MyComponent<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  url<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<hr />

<p>Such prop types validation is directly extracted from React, thus the
user can refer to <a href="https://facebook.github.io/react/docs/typechecking-with-proptypes.html">this article</a> for details.</p>
<p><br />
<strong>5) Component execution </strong></p>
<p>Now that we have the component properties and the new context,
we are ready to call the component with them.</p>
<p>If the component fails, then <code>context.options.retries</code> is used to decide if
and how many retries should be attempted. A negative number means
infinite retries, while zero means no retries at all (the default).</p>
<p>The retries option can also be specified as a <strong>function</strong> that, given
the error object, returns the number of retries. Note that the function
can also return a promise which will be awaited.</p>
<p>Once all the retries have been attempted without success,
the <code>context.options.catch</code> is used.
Such option is a function that, given the error object, returns
(eventually with a promise) what should be used instead as the component
result.</p>

            </div>
            <div class="page-nav">
                
                <span class="previous">Previous: <a href="/docs/advanced/evaluate.html">evaluate</a></span>
                
                
            </div>
        </div>
    </div>
</div>

    </div>

    <footer class="footer text-center text-muted">
  <p>
    <span><a href="https://github.com/webmiddle/webmiddle">webmiddle</a></span>
     · 
    <span>MIT © <a href="https://github.com/Maluen">Manuel Dell&#x27;Elce</a></span>
  </p>
  <p>
    Found an issue with the docs? Report it <a href="https://github.com/webmiddle/webmiddle.github.io/issues">here</a>.
  </p>
</footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../../assets/js/bootstrap.min.js"></script>
  </body>
</html>
