<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="JSX framework for multi-layer web data integration.">
    <title>Documentation | WebMiddle</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="../../../assets/css/bootstrap.min.css">

    <!-- Prism CSS customized to match github style -->
    <link rel="stylesheet" href="../../../assets/css/prism-custom.css">

    <!-- Custom styles for this template -->
    <link href="../../../assets/css/theme.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    
<!-- Fixed navbar -->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../index.html">WebMiddle</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <!-- you can exclude pages using {{#isnt}} helper: {{#isnt data.title 'Blog'}} -->
        
        <li>
          <a href="/">Home</a>
        </li>
        
        <li class="active">
          <a href="/docs">Documentation</a>
        </li>
        
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>


    <div class="container theme-showcase content" role="main">

      
<div class="content-header">
    <div class="container">
        <h1>Documentation</h1>
        <p>Learn how to use the framework effectively.</p>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-lg-3 sidebar">
            <!-- Sidebar -->
            <ul class="nav">      <li>        <a href="/docs/introduction.html">Introduction</a>              </li>          <li>        <a href="/docs/overview.html">Overview</a>        <ul class="nav">      <li>        <a href="/docs/jsx_services.html">JSX services</a>              </li>          <li>        <a href="/docs/multiple_layers.html">Multiple layers</a>              </li>    </ul>      </li>          <li>        <a href="/docs/getting_started.html">Getting started</a>              </li>          <li>        <a href="/docs/technical_documentation/index.html">Technical documentation</a>        <ul class="nav">      <li>        <a href="/docs/technical_documentation/webmiddle.html">webmiddle</a>        <ul class="nav">      <li>        <a href="/docs/technical_documentation/evaluate.html">evaluate</a>              </li>          <li>        <a href="/docs/technical_documentation/callvirtual.html">callVirtual</a>              </li>    </ul>      </li>          <li>        <a href="/docs/technical_documentation/cookiemanager.html">CookieManager</a>              </li>          <li>        <a href="/docs/technical_documentation/pipe.html">Pipe</a>              </li>          <li>        <a href="/docs/technical_documentation/parallel.html">Parallel</a>              </li>          <li>        <a href="/docs/technical_documentation/arraymap.html">ArrayMap</a>              </li>          <li>        <a href="/docs/technical_documentation/resume.html">Resume</a>              </li>          <li>        <a href="/docs/technical_documentation/httprequest.html">HttpRequest</a>              </li>          <li>        <a href="/docs/technical_documentation/browser.html">Browser</a>              </li>          <li>        <a href="/docs/technical_documentation/cheeriotovirtual.html">CheerioToVirtual</a>              </li>          <li>        <a href="/docs/technical_documentation/jsonselecttovirtual.html">JSONSelectToVirtual</a>              </li>          <li>        <a href="/docs/technical_documentation/virtualtojson.html">VirtualToJson</a>              </li>          <li>        <a href="/docs/technical_documentation/html-xml-json_to_json.html">HTML/XML/JSON to JSON</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/index.html">Example: News Search</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/index.html">Site WebMiddles</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/fox_news.html">Fox News</a>              </li>          <li>        <a href="/docs/example/site_webmiddles/the_new_york_times.html">The New York Times</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/project_webmiddle/index.html">Project Webmiddle</a>        <ul class="nav">      <li>        <a href="/docs/example/project_webmiddle/site_handler.html">Site handler</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/meta.html">Meta</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/articledetails.html">ArticleDetails</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/searcharticles.html">SearchArticles</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/business_logic.html">Business logic</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/main.html">Main</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/sitemain.html">SiteMain</a>              </li>          <li>        <a class="active" href="/docs/example/project_webmiddle/processpage.html">ProcessPage</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/filtering_and_merging.html">Filtering and merging</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/sample_execution.html">Sample execution</a>              </li>    </ul>      </li>    </ul>
        </div>

        <div class="col-lg-9">
            <!-- Content -->
            <div class="page-header">
                <h3 id="processpage">ProcessPage</h3>
<p>It is the most complex among all the business logic services, its job is
to extract the list of articles for a given page number.</p>
<p>It is composed of the following steps:</p>
<ul>
<li><p><strong>SearchArticles</strong> to get the initial list of page articles, these
articles contain incomplete information, such as missing the full
text.<br /></p>
<pre><code class="language-jsx"><span class="token operator">&lt;</span>SearchArticles
  <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span>
  name<span class="token operator">=</span><span class="token string">"articles"</span>
  query<span class="token operator">=</span><span class="token punctuation">{</span>query<span class="token punctuation">}</span>
  startYear<span class="token operator">=</span><span class="token punctuation">{</span>startYear<span class="token punctuation">}</span>
  endYear<span class="token operator">=</span><span class="token punctuation">{</span>endYear<span class="token punctuation">}</span>
  pageNumber<span class="token operator">=</span><span class="token punctuation">{</span>pageNumber<span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">></span></code></pre>
</li>
<li><p><strong>Filter</strong> to remove articles that don’t pass the project input, for
example articles whose publication year is lower than the
startYear.<br />
The filtering step is needed because not every site might support
the required level of granularity and customization in which results
should be returned, thus this local filtering guarantees that
unrelated articles won’t end up in the final list of articles.<br /></p>
<pre><code class="language-jsx"><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> articles <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Filter</span>
    <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>filteredArticles<span class="token punctuation">"</span></span>
    <span class="token attr-name">articles</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>articles<span class="token punctuation">}</span></span>
    <span class="token attr-name">filters</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>filters<span class="token punctuation">}</span></span>
  <span class="token punctuation">/></span></span>
<span class="token punctuation">}</span></code></pre>
</li>
<li><p><strong>For each article</strong></p>
<ul>
<li><p><strong>ArticleDetails</strong> to get the missing information about the
article.</p>
</li>
<li><p><strong>Merge</strong> to extend the article obtained from SearchArticles
with the article obtained from ArticleDetails.
<br /></p>
<pre><code class="language-jsx"><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filteredArticles <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ArrayMap</span>
    <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mergedArticleResources<span class="token punctuation">"</span></span>
    <span class="token attr-name">array</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>filteredArticles<span class="token punctuation">.</span>content<span class="token punctuation">}</span></span>
    <span class="token attr-name">limit</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span></span>
    <span class="token attr-name">callback</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>articleContent <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Pipe</span><span class="token punctuation">></span></span>
        <span class="token operator">&lt;</span>ArticleDetails
          <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>rest<span class="token punctuation">}</span>
          name<span class="token operator">=</span><span class="token string">"articleDetails"</span>
          url<span class="token punctuation">=</span><span class="token punctuation">{</span>articleContent<span class="token punctuation">.</span>url<span class="token punctuation">}</span>
          options<span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token keyword">catch</span><span class="token punctuation">:</span> createEmptyArticleDetails<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/></span></span>

        <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string">'article'</span><span class="token punctuation">,</span>
          contentType<span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
          content<span class="token punctuation">:</span> articleContent<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

        <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> article<span class="token punctuation">,</span> articleDetails <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Merge</span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mergedArticle<span class="token punctuation">"</span></span>
            <span class="token attr-name">sources</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>article<span class="token punctuation">,</span> articleDetails<span class="token punctuation">]</span><span class="token punctuation">}</span></span>
          <span class="token punctuation">/></span></span>
        <span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Pipe</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">/</span><span class="token operator">></span>
<span class="token punctuation">}</span></code></pre>
<p>Here, the “catch” webmiddle evaluation option is used to create
an empty article in case the service irreparably fails.</p>
</li>
</ul>
</li>
<li><p>A <strong>final filtering</strong> step that can now use all the new retrieved
information to exclude any unrelated article.<br /></p>
<pre><code class="language-jsx"><span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* Flatten the resource of resources */</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> mergedArticleResources <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'mergedArticles'</span><span class="token punctuation">,</span>
  contentType<span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
  content<span class="token punctuation">:</span> mergedArticleResources<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>r <span class="token operator">=</span><span class="token operator">></span> r<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> mergedArticles <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Filter</span>
    <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>finalArticles<span class="token punctuation">"</span></span>
    <span class="token attr-name">articles</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>mergedArticles<span class="token punctuation">}</span></span>
    <span class="token attr-name">filters</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>filters<span class="token punctuation">}</span></span>
  <span class="token punctuation">/></span></span>
<span class="token punctuation">}</span></code></pre>
</li>
</ul>
<p>Since each ArticleDetails call usually leads to network requests being
executed, the first filtering step is used to reduce right away the
number of articles, and thus to speed up the search.</p>

            </div>
            <div class="page-nav">
                
                <span class="previous">Previous: <a href="/docs/example/project_webmiddle/sitemain.html">SiteMain</a></span>
                
                
                <span class="next">Next: <a href="/docs/example/project_webmiddle/filtering_and_merging.html">Filtering and merging</a></span>
                
            </div>
        </div>
    </div>
</div>

    </div>

    <footer class="footer text-center text-muted">
  <p>
    <span><a href="https://github.com/webmiddle/webmiddle">webmiddle</a></span>
     · 
    <span>MIT © <a href="https://github.com/Maluen">Manuel Dell&#x27;Elce</a></span>
  </p>
  <p>
    Found an issue with the docs? Report it <a href="https://github.com/webmiddle/webmiddle.github.io/issues">here</a>.
  </p>
</footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../../../assets/js/bootstrap.min.js"></script>
  </body>
</html>
