<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Node.js JSX framework for modular web scraping and data integration">
    <title>Documentation | WebMiddle</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">

    <!-- Prism CSS customized to match github style -->
    <link rel="stylesheet" href="../assets/css/prism-custom.css">

    <!-- Custom styles for this template -->
    <link href="../assets/css/theme.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    
<!-- Fixed navbar -->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">WebMiddle</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <!-- you can exclude pages using {{#isnt}} helper: {{#isnt data.title 'Blog'}} -->
        
        <li>
          <a href="/">Home</a>
        </li>
        
        <li class="active">
          <a href="/docs">Documentation</a>
        </li>
        
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>


    <div class="container theme-showcase content" role="main">

      
<div class="content-header">
    <div class="container">
        <h1>Documentation</h1>
        <p>Learn how to use the framework effectively.</p>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-lg-3 sidebar">
            <!-- Sidebar -->
            <ul class="nav">      <li>        <a href="/docs/introduction.html">Introduction</a>              </li>          <li>        <a href="/docs/getting_started.html">Getting started</a>              </li>          <li>        <a href="/docs/overview.html">Overview</a>        <ul class="nav">      <li>        <a href="/docs/jsx_services.html">JSX services</a>              </li>          <li>        <a class="active" href="/docs/webmiddle_objects.html">WebMiddle objects</a>              </li>          <li>        <a href="/docs/multiple_layers.html">Multiple layers</a>              </li>    </ul>      </li>          <li>        <a href="/docs/advanced/index.html">Advanced</a>        <ul class="nav">      <li>        <a href="/docs/advanced/context.html">context</a>              </li>          <li>        <a href="/docs/advanced/evaluate.html">evaluate</a>        <ul class="nav">      <li>        <a href="/docs/advanced/callvirtual.html">callVirtual</a>              </li>    </ul>      </li>    </ul>      </li>          <li>        <a href="/docs/packages.html">Packages</a>              </li>          <li>        <a href="/docs/example/index.html">Example: News Search</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/index.html">Site WebMiddles</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/fox_news.html">Fox News</a>              </li>          <li>        <a href="/docs/example/site_webmiddles/the_new_york_times.html">The New York Times</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/project_webmiddle/index.html">Project Webmiddle</a>        <ul class="nav">      <li>        <a href="/docs/example/project_webmiddle/site_handler.html">Site handler</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/meta.html">Meta</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/articledetails.html">ArticleDetails</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/searcharticles.html">SearchArticles</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/business_logic.html">Business logic</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/main.html">Main</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/sitemain.html">SiteMain</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/processpage.html">ProcessPage</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/filtering_and_merging.html">Filtering and merging</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/sample_execution.html">Sample execution</a>              </li>    </ul>      </li>    </ul>
        </div>

        <div class="col-lg-9">
            <!-- Content -->
            <div class="page-header">
                <h3 id="webmiddle-objects">WebMiddle objects</h3>
<p>The framework provides a WebMiddle class that can be used to create WebMiddle objects:</p>
<pre><code class="language-jsx"><span class="token keyword">import</span> WebMiddle <span class="token keyword">from</span> <span class="token string">'webmiddle'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> textResource <span class="token operator">=</span> <span class="token punctuation">(</span>content<span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">'result'</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">,</span>
  contentType<span class="token punctuation">:</span> <span class="token string">'text/plain'</span><span class="token punctuation">,</span>
  content<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> content <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> content <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">String</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token punctuation">:</span> content<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> webmiddle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebMiddle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  services<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    divide<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">,</span> b <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">textResource</span><span class="token punctuation">(</span>a <span class="token operator">/</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span>
    multiply<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">,</span> b <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">textResource</span><span class="token punctuation">(</span>a <span class="token operator">*</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Multiple services targeting websites, web APIs or collection of web resources can be grouped together into so called webmiddle objects, to be reusable in different applications.<br />
Each webmiddle object exposes settings accessible by all of its services and can be easily turned into a REST API for remote access.</p>
<p>A webmiddle can be seen as a container of related services plus settings
to support them, for example you may have a webmiddle for a site, a
webmiddle for a project and so on.</p>
<p>Moreover, by also setting the parent, you can create a <strong>tree</strong> of
webmiddle instances that can be used in more complex scenarios.</p>
<p>The services registered to a webmiddle are wrapped in a higher order service that is
associated to that webmiddle. This way the service will be able to use the webmiddle,
with its settings and services, during evaluation.</p>
<p>A webmiddle <strong>application</strong> will always have at least one webmiddle
object, i.e. a root object, which might even have no services
associated to it. The reasoning is that the system provides a way of
evaluating services that aren’t associated to any webmiddle; in such a
case, the root webmiddle takes ownership of the service for all the time
required to evaluate it.</p>
<p>The system is also able of creating webmiddle trees dynamically, meaning that when evaluating a service associated to another webmiddle, a parent correlation between the service webmiddle and the caller webmiddle will be established, this way the service will have access to any setting, option and service of the caller webmiddle as default.</p>
<p>This dynamic system is especially useful in case of general purpose services, such as HttpRequest, that aren’t meant to be bound to any particular webmiddle, but that need access to settings to decide how to be evaluated, for example to base the number of retries on the “network.retries” setting.</p>
<p>See the <a href="/docs/advanced">advanced section</a> for more info.</p>
<p><br />
<strong>Properties</strong>:</p>
<table class="table table-bordered table-striped table-responsive">
  <thead>
    <tr>
      <td>Name</td>
      <td>Description</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>name</td>
      <td>String used to identify the webmiddle. It is optional.</td>
    </tr>
    <tr>
      <td>parent</td>
      <td>A webmiddle instance that should be used as the webmiddle parent. It is optional.</td>
    </tr>
    <tr>
      <td>services</td>
      <td>An object with the format <code>&lt;path : String, service&gt;</code> containing the services that should be associated to the webmiddle, it shouldn’t be accessed directly (use the <strong>service function</strong> instead).</td>
    </tr>
    <tr>
      <td>settings</td>
      <td>An object with the instance settings, it shouldn’t be accessed directly (use the <strong>setting function</strong> instead).</td>
    </tr>
    <tr>
      <td>cookieManager</td>
      <td>Used as a jar to store and retrieve cookies, it is shared among all the webmiddle instances.</td>
    </tr>
  </tbody>
</table>

<p><br />
<strong>Methods</strong>:</p>
<ul>
<li><p><strong>service(path : String)</strong><br />
Returns the service with the given path. If there is no such service
in the webmiddle, then the function is called recursively on the
parent, if any.</p>
</li>
<li><p><strong>setting(path : String)<br />
</strong>Just like the service function, but for settings. Also uses the
parent if needed.</p>
</li>
<li><p><strong>registerService(path, Service)<br />
</strong>Allows to add a service to a webmiddle, this is mainly used
internally at construction time, but can also be used to add a
service at a later time.</p>
</li>
<li><p><strong>log(…args)<br />
</strong>Utility logging function, the args are printed to the console. The
log is skipped if the “verbose” setting is not true.</p>
</li>
</ul>

            </div>
            <div class="page-nav">
                
                <span class="previous">Previous: <a href="/docs/jsx_services.html">JSX services</a></span>
                
                
                <span class="next">Next: <a href="/docs/multiple_layers.html">Multiple layers</a></span>
                
            </div>
        </div>
    </div>
</div>

    </div>

    <footer class="footer text-center text-muted">
  <p>
    <span><a href="https://github.com/webmiddle/webmiddle">webmiddle</a></span>
     · 
    <span>MIT © <a href="https://github.com/Maluen">Manuel Dell&#x27;Elce</a></span>
  </p>
  <p>
    Found an issue with the docs? Report it <a href="https://github.com/webmiddle/webmiddle.github.io/issues">here</a>.
  </p>
</footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../assets/js/bootstrap.min.js"></script>
  </body>
</html>
