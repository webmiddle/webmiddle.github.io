<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="JSX framework for multi-layer web data integration.">
    <title>Documentation | WebMiddle</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="../../assets/css/bootstrap.min.css">

    <!-- Prism CSS customized to match github style -->
    <link rel="stylesheet" href="../../assets/css/prism-custom.css">

    <!-- Custom styles for this template -->
    <link href="../../assets/css/theme.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    
<!-- Fixed navbar -->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">WebMiddle</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <!-- you can exclude pages using {{#isnt}} helper: {{#isnt data.title 'Blog'}} -->
        
        <li>
          <a href="/">Home</a>
        </li>
        
        <li class="active">
          <a href="/docs">Documentation</a>
        </li>
        
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>


    <div class="container theme-showcase content" role="main">

      
<div class="content-header">
    <div class="container">
        <h1>Documentation</h1>
        <p>Learn how to use the framework effectively.</p>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-lg-3 sidebar">
            <!-- Sidebar -->
            <ul class="nav">      <li>        <a href="/docs/introduction.html">Introduction</a>              </li>          <li>        <a href="/docs/overview.html">Overview</a>        <ul class="nav">      <li>        <a href="/docs/jsx_services.html">JSX services</a>              </li>          <li>        <a href="/docs/multiple_layers.html">Multiple layers</a>              </li>    </ul>      </li>          <li>        <a href="/docs/getting_started.html">Getting started</a>              </li>          <li>        <a href="/docs/technical_documentation/index.html">Technical documentation</a>        <ul class="nav">      <li>        <a href="/docs/technical_documentation/webmiddle.html">webmiddle</a>        <ul class="nav">      <li>        <a class="active" href="/docs/technical_documentation/evaluate.html">evaluate</a>              </li>          <li>        <a href="/docs/technical_documentation/callvirtual.html">callVirtual</a>              </li>    </ul>      </li>          <li>        <a href="/docs/technical_documentation/cookiemanager.html">CookieManager</a>              </li>          <li>        <a href="/docs/technical_documentation/pipe.html">Pipe</a>              </li>          <li>        <a href="/docs/technical_documentation/parallel.html">Parallel</a>              </li>          <li>        <a href="/docs/technical_documentation/arraymap.html">ArrayMap</a>              </li>          <li>        <a href="/docs/technical_documentation/resume.html">Resume</a>              </li>          <li>        <a href="/docs/technical_documentation/httprequest.html">HttpRequest</a>              </li>          <li>        <a href="/docs/technical_documentation/browser.html">Browser</a>              </li>          <li>        <a href="/docs/technical_documentation/cheeriotovirtual.html">CheerioToVirtual</a>              </li>          <li>        <a href="/docs/technical_documentation/jsonselecttovirtual.html">JSONSelectToVirtual</a>              </li>          <li>        <a href="/docs/technical_documentation/virtualtojson.html">VirtualToJson</a>              </li>          <li>        <a href="/docs/technical_documentation/html-xml-json_to_json.html">HTML/XML/JSON to JSON</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/index.html">Example: News Search</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/index.html">Site WebMiddles</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/fox_news.html">Fox News</a>              </li>          <li>        <a href="/docs/example/site_webmiddles/the_new_york_times.html">The New York Times</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/project_webmiddle/index.html">Project Webmiddle</a>        <ul class="nav">      <li>        <a href="/docs/example/project_webmiddle/site_handler.html">Site handler</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/meta.html">Meta</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/articledetails.html">ArticleDetails</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/searcharticles.html">SearchArticles</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/business_logic.html">Business logic</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/main.html">Main</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/sitemain.html">SiteMain</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/processpage.html">ProcessPage</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/filtering_and_merging.html">Filtering and merging</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/sample_execution.html">Sample execution</a>              </li>    </ul>      </li>    </ul>
        </div>

        <div class="col-lg-9">
            <!-- Content -->
            <div class="page-header">
                <p><strong>evaluate</strong></p>
<p><img src="../../assets/img/documentation/webmiddle_evaluate.png" alt="evaluate" title="evaluate"></p>
<p>A different action is taken depending on the type of the value. After
the action, if the obtained value is different from the original value,
then the evaluate function is called recursively on such new value. If
no step applies to the value, then the evaluate function just returns
the value as is.</p>
<p>The recursive approach allows for greater composability, in fact the
function to evaluate might return a promise that returns a virtual and
so on.</p>
<p>Let’s see these actions.</p>
<p><br />
<strong>1)</strong> If value is a <strong>function</strong>, then that function is called by
spreading as arguments the <strong>options.functionParameters</strong> array, if such
option isn’t set, then the function is called without arguments.</p>
<p><hr />
<strong>Example:</strong></p>
<p>The Pipe service sets the <code>options.functionParameters</code> to the resources
object, this allows the user to specify a JSX children as a function
expecting the resources obtained up to that point.</p>
<hr />

<p><br />
<strong>2)</strong> If value is a <strong>promise</strong>, then the system just awaits the
resolving of such promise, so to obtain the resolved value.</p>
<p><br />
<strong>3) Virtual</strong></p>
<p>If value is a <strong>virtual</strong>, then the callVirtual function is used to call
the service associated to such virtual. The callVirtual will also create
a new options object based on the current options and on any options
specified by both the virtual (as attribute) and the virtual service (as
static property).</p>
<p>The callVirtual will also retrieve the webmiddle instance to use in the
recursive call (i.e. down the call chain).</p>
<p>Thus, the evaluate function will use the new webmiddle and the new
options object in the recursive call. That way they will be passed down
the call chain.</p>
<p><hr />
<strong>Example:</strong></p>
<p>virtual:</p>
<pre><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyService</span> <span class="token attr-name">options</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> retries<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span></code></pre>
<p>Where MyService is defined as follows:</p>
<pre><code class="language-jsx"><span class="token keyword">const</span> MyService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyOtherService</span> <span class="token punctuation">/></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>In this case, evaluating <em>virtual</em> will lead to <code>&lt;MyOtherService /&gt;</code>
to be evaluated recursively with the <code>{ retries: 10 }</code> options.</p>
<hr />

<p>See the callVirtual section for details on how the new options and the
new webmiddle are calculated.</p>
<p>Once the recursive call completes, the eventual temporaneous webmiddle
correlation that was created will be destroyed by removing the
temporaneous parent.</p>
<p>Another step that is executed after the recursive call completed is the
<strong>resource override</strong>: if the result is a resource, then the resource
name and contentType are replaced with the name and contentType
attributes of the top virtual, if any.</p>
<p><hr />
<strong>Example:</strong></p>
<p>virtual:</p>
<pre><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyService</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>”myResourceName”</span> <span class="token punctuation">/></span></span></code></pre>
<p>Let’s suppose that MyService eventually returns the following resource:</p>
<pre><code class="language-javascript"><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'other'</span><span class="token punctuation">,</span>
  contentType<span class="token punctuation">:</span> <span class="token string">'text/plain'</span><span class="token punctuation">,</span>
  content<span class="token punctuation">:</span> <span class="token string">'some content here'</span>
<span class="token punctuation">}</span></code></pre>
<p>Then such resource will be transformed to:</p>
<pre><code class="language-javascript"><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'myResourceName'</span><span class="token punctuation">,</span>
  contentType<span class="token punctuation">:</span> <span class="token string">'text/plain'</span><span class="token punctuation">,</span>
  content<span class="token punctuation">:</span> <span class="token string">'some content here'</span>
<span class="token punctuation">}</span></code></pre>
<p>The resource override is a must when composing services, as it makes
sure that resources will have expected names, since they will be often
referenced by their names, such as in the Pipe and Parallel services.</p>
<p><br />
<strong>4)</strong> If value isn’t a <strong>resource</strong>, then the system checks if the
options.expectResource is true, in such a case, an exception will be
thrown.</p>
<p><br />
<strong>5)</strong> As <strong>default</strong>, the value is returned as is.</p>

            </div>
            <div class="page-nav">
                
                <span class="previous">Previous: <a href="/docs/technical_documentation/webmiddle.html">webmiddle</a></span>
                
                
                <span class="next">Next: <a href="/docs/technical_documentation/callvirtual.html">callVirtual</a></span>
                
            </div>
        </div>
    </div>
</div>

    </div>

    <footer class="footer text-center text-muted">
  <p>
    <span><a href="https://github.com/webmiddle/webmiddle">webmiddle</a></span>
     · 
    <span>MIT © <a href="https://github.com/Maluen">Manuel Dell&#x27;Elce</a></span>
  </p>
  <p>
    Found an issue with the docs? Report it <a href="https://github.com/webmiddle/webmiddle.github.io/issues">here</a>.
  </p>
</footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../../assets/js/bootstrap.min.js"></script>
  </body>
</html>
