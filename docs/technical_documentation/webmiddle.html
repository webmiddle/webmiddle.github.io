<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="JSX framework for multi-layer web data integration.">
    <title>Documentation | WebMiddle</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="../../assets/css/bootstrap.min.css">

    <!-- Prism CSS customized to match github style -->
    <link rel="stylesheet" href="../../assets/css/prism-custom.css">

    <!-- Custom styles for this template -->
    <link href="../../assets/css/theme.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    
<!-- Fixed navbar -->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">WebMiddle</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <!-- you can exclude pages using {{#isnt}} helper: {{#isnt data.title 'Blog'}} -->
        
        <li>
          <a href="/">Home</a>
        </li>
        
        <li class="active">
          <a href="/docs">Documentation</a>
        </li>
        
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>


    <div class="container theme-showcase content" role="main">

      
<div class="content-header">
    <div class="container">
        <h1>Documentation</h1>
        <p>Learn how to use the framework effectively.</p>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-lg-3 sidebar">
            <!-- Sidebar -->
            <ul class="nav">      <li>        <a href="/docs/introduction.html">Introduction</a>              </li>          <li>        <a href="/docs/overview.html">Overview</a>        <ul class="nav">      <li>        <a href="/docs/jsx_services.html">JSX services</a>              </li>          <li>        <a href="/docs/multiple_layers.html">Multiple layers</a>              </li>    </ul>      </li>          <li>        <a href="/docs/getting_started.html">Getting started</a>              </li>          <li>        <a href="/docs/technical_documentation/index.html">Technical documentation</a>        <ul class="nav">      <li>        <a class="active" href="/docs/technical_documentation/webmiddle.html">webmiddle</a>        <ul class="nav">      <li>        <a href="/docs/technical_documentation/evaluate.html">evaluate</a>              </li>          <li>        <a href="/docs/technical_documentation/callvirtual.html">callVirtual</a>              </li>    </ul>      </li>          <li>        <a href="/docs/technical_documentation/cookiemanager.html">CookieManager</a>              </li>          <li>        <a href="/docs/technical_documentation/pipe.html">Pipe</a>              </li>          <li>        <a href="/docs/technical_documentation/parallel.html">Parallel</a>              </li>          <li>        <a href="/docs/technical_documentation/arraymap.html">ArrayMap</a>              </li>          <li>        <a href="/docs/technical_documentation/resume.html">Resume</a>              </li>          <li>        <a href="/docs/technical_documentation/httprequest.html">HttpRequest</a>              </li>          <li>        <a href="/docs/technical_documentation/browser.html">Browser</a>              </li>          <li>        <a href="/docs/technical_documentation/cheeriotovirtual.html">CheerioToVirtual</a>              </li>          <li>        <a href="/docs/technical_documentation/jsonselecttovirtual.html">JSONSelectToVirtual</a>              </li>          <li>        <a href="/docs/technical_documentation/virtualtojson.html">VirtualToJson</a>              </li>          <li>        <a href="/docs/technical_documentation/html-xml-json_to_json.html">HTML/XML/JSON to JSON</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/index.html">Example: News Search</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/index.html">Site WebMiddles</a>        <ul class="nav">      <li>        <a href="/docs/example/site_webmiddles/fox_news.html">Fox News</a>              </li>          <li>        <a href="/docs/example/site_webmiddles/the_new_york_times.html">The New York Times</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/project_webmiddle/index.html">Project Webmiddle</a>        <ul class="nav">      <li>        <a href="/docs/example/project_webmiddle/site_handler.html">Site handler</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/meta.html">Meta</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/articledetails.html">ArticleDetails</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/searcharticles.html">SearchArticles</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/business_logic.html">Business logic</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/main.html">Main</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/sitemain.html">SiteMain</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/processpage.html">ProcessPage</a>              </li>          <li>        <a href="/docs/example/project_webmiddle/filtering_and_merging.html">Filtering and merging</a>              </li>    </ul>      </li>          <li>        <a href="/docs/example/sample_execution.html">Sample execution</a>              </li>    </ul>      </li>    </ul>
        </div>

        <div class="col-lg-9">
            <!-- Content -->
            <div class="page-header">
                <h3 id="webmiddle">webmiddle</h3>
<p>The core of the whole system, provides a <strong>WebMiddle class</strong> for the
evaluation of services, handling resources and settings.</p>
<p>A webmiddle instance can also have a <strong>parent</strong>, i.e. another webmiddle
instance from which the webmiddle inherits settings and services.</p>
<p>A webmiddle can be seen as a container of related services plus settings
to support them, for example you may have a webmiddle for a site, a
webmiddle for a project and so on.</p>
<p>Moreover, by also setting the parent, you can create a <strong>tree</strong> of
webmiddle instances that can be used in more complex scenarios, for
example the webmiddle for the site handler that we have seen in the
previous section can have the site webmiddle as parent.</p>
<p>A webmiddle <strong>application</strong> will always have at least one webmiddle
instance, i.e. a root instance, which might even have no services
associated to it. The reasoning is that the system provides a way of
evaluating services that aren’t associated to any webmiddle; in such a
case, the webmiddle takes ownership of the service for all the time
required to evaluate it.</p>
<p>The system is also able of creating webmiddle trees dynamically, meaning
that when evaluating a service associated to another webmiddle, a parent
correlation between the service webmiddle and the caller webmiddle will
be established, this way the service will have access to any setting,
option and service of the caller webmiddle as default.</p>
<p>This <strong>dynamic system</strong> is especially useful in case of general purpose
services, such as HttpRequest, that aren’t meant to be bound to any
particular webmiddle, but that need access to settings to decide how to
be evaluated, for example to base the number of retries on the
“network.retries” setting.</p>
<p>A webmiddle instance has the following <strong>properties</strong>:</p>
<table class="table table-bordered table-striped table-responsive">
  <thead>
    <tr>
      <td>Name</td>
      <td>Description</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>name</td>
      <td>String used to identify the webmiddle. It is optional.</td>
    </tr>
    <tr>
      <td>parent</td>
      <td>A webmiddle instance that should be used as the webmiddle parent. It is optional.</td>
    </tr>
    <tr>
      <td>services</td>
      <td>An object with the format <code>&lt;path : String, service&gt;</code> containing the services that should be associated to the webmiddle, it shouldn’t be accessed directly (use the <strong>service function</strong> instead).</td>
    </tr>
    <tr>
      <td>settings</td>
      <td>An object with the instance settings, it shouldn’t be accessed directly (use the <strong>setting function</strong> instead).</td>
    </tr>
    <tr>
      <td>cookieManager</td>
      <td>Used as a jar to store and retrieve cookies, it is shared among all the webmiddle instances.</td>
    </tr>
  </tbody>
</table>

<p>The services added to the webmiddle at construction time are
<strong>registered</strong> to the instance, namely, instead of adding the service as
is, the service gets wrapped in a higher order service that is
associated to the new webmiddle.</p>
<p>A webmiddle instance has the following <strong>functions</strong>:</p>
<ul>
<li><p><strong>service(path : String)</strong><br />
Returns the service with the given path. If there is no such service
in the webmiddle, then the function is called recursively on the
parent, if any.</p>
</li>
<li><p><strong>setting(path : String)<br />
</strong>Just like the service function, but for settings. Also uses the
parent if needed.</p>
</li>
<li><p><strong>log(…args)<br />
</strong>Utility logging function, the args are printed to the console. The
log is skipped if the “verbose” setting is not true.</p>
</li>
<li><p><strong>registerService(path, Service)<br />
</strong>Allows to add a service to a webmiddle, this is mainly used
internally at construction time, but can also be used to add a
service at a later time.</p>
</li>
<li><p><strong>isVirtual(target)<br />
</strong>Returns true if <em>target</em> is a <strong>virtual</strong>, i.e. if it is an object
having only the following properties: type, attributes and
children.<br />
Any JSX is transpiled into a virtual at build time, while other
services might create virtual objects explicitly, for example
resource converters such as the CheerioToVirtual service.</p>
</li>
<li><p><strong>isResource(target)<br />
</strong>Returns true if <em>target</em> is a <strong>resource</strong>, i.e. if it is an
object having only the following properties: name, contentType and
content.</p>
</li>
<li><p><strong>evaluate(value, options)<br />
</strong>The most important function, can evaluate pretty much anything: a
function, a promise, a virtual, a resource and so on.</p>
</li>
<li><p><strong>callVirtual(virtual, options)<br />
</strong>It is mostly used by the evaluate function, it is used to
translate a virtual into the actual service call, by making sure to
also pass the correct properties (props) to the service. It also
handles retries and error handling regarding the service.</p>
</li>
</ul>

            </div>
            <div class="page-nav">
                
                <span class="previous">Previous: <a href="/docs/technical_documentation/index.html">Technical documentation</a></span>
                
                
                <span class="next">Next: <a href="/docs/technical_documentation/evaluate.html">evaluate</a></span>
                
            </div>
        </div>
    </div>
</div>

    </div>

    <footer class="footer text-center text-muted">
  <p>
    <span><a href="https://github.com/webmiddle/webmiddle">webmiddle</a></span>
     · 
    <span>MIT © <a href="https://github.com/Maluen">Manuel Dell&#x27;Elce</a></span>
  </p>
  <p>
    Found an issue with the docs? Report it <a href="https://github.com/webmiddle/webmiddle.github.io/issues">here</a>.
  </p>
</footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../../assets/js/bootstrap.min.js"></script>
  </body>
</html>
